<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Google Form Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        iframe {
            width: 90%;
            height: 80vh;
            border: none;
        }
        .warning {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <h2>Google Form Quiz</h2>
    <div class="warning" id="warning">⚠️ Tab switching detected! You are expired. ⚠️</div>
    
    <!-- Replace the src URL with your actual Google Form link -->
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeFhbFW0ExbinRdAeZ3z9Uxt5f6mPWVH_uC-G-FhMX5BlGgRA/viewform?embedded=true"></iframe>
<script>
    let tabSwitchCount = 0;
    let quizDisabled = false;
    let hasInteracted = false; // Ensures user interaction before detection starts

    // Detect user interaction (click, keypress) to prevent false triggering
    document.addEventListener("click", () => hasInteracted = true, { once: true });
    document.addEventListener("keydown", () => hasInteracted = true, { once: true });

    document.addEventListener("visibilitychange", function () {
        if (!hasInteracted) return; // Don't detect tab switches before user interacts

        if (document.hidden) {
            tabSwitchCount++;

            // Show warning
            document.getElementById("warning").style.display = "flex";

            // Disable the quiz permanently after the first tab switch
            if (!quizDisabled) {
                document.getElementById("quiz-container").style.pointerEvents = "none";
                document.getElementById("quiz-container").style.opacity = "0.5";
                quizDisabled = true;
            }

            setTimeout(() => {
                document.getElementById("warning").style.display = "none";
            }, 3000);

            // Redirect after 3 tab switches
            if (tabSwitchCount >= 3) {
                alert("You have switched tabs too many times! Your quiz attempt is disqualified.");
                window.location.href = "https://www.google.com"; // Redirect to another page if needed
            }
        }
    });
</script>



</body>
</html>
